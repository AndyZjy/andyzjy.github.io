<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Lerna初探 | Jerome Blog</title>

  <!-- keywords -->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="1、简介 首先是关于Monorepo（一篇不错的介绍Monorepo的文章），它是管理项目代码的一种方式，主要手段是通过在一个项目仓库中管理多个模块&#x2F;仓库包。而Multirepo是传统的仓库管理方法，也是公司目前所用的方法，即所有的项目包都是独立仓库部署和管理。两种方式对比如下：  两种方式进行对比的话，千人千面。前者允许多元化发展（各项目可以有自己的构建工具、依赖管理策略、单元测试方法），后者希">
<meta property="og:type" content="article">
<meta property="og:title" content="Lerna初探">
<meta property="og:url" content="http://example.com/2020/12/11/lerna/index.html">
<meta property="og:site_name" content="Jerome Blog">
<meta property="og:description" content="1、简介 首先是关于Monorepo（一篇不错的介绍Monorepo的文章），它是管理项目代码的一种方式，主要手段是通过在一个项目仓库中管理多个模块&#x2F;仓库包。而Multirepo是传统的仓库管理方法，也是公司目前所用的方法，即所有的项目包都是独立仓库部署和管理。两种方式对比如下：  两种方式进行对比的话，千人千面。前者允许多元化发展（各项目可以有自己的构建工具、依赖管理策略、单元测试方法），后者希">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2020/png/346819/1594027202685-250efc82-2d70-412a-ad3e-37a6176924d0.png">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2020/png/346819/1593596823107-795df9a8-9cb2-4044-9c0b-c607dcbe56ec.png">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2020/png/346819/1593601700780-f6e0fe18-09e2-41e2-ba61-f8f18906edba.png">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2020/png/346819/1593601850411-91a9fcea-b92c-41a4-9044-0f7ce8a426e0.png">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2020/png/346819/1593602558875-7c9db360-0811-4a87-93ee-6f6110a41663.png">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2020/png/346819/1594014883318-d9c11a38-df02-4622-b116-4de45bcd71a4.png">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2020/png/346819/1594015055046-1d39a385-960c-458d-934a-ff90876f2cfe.png">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2020/png/346819/1594015212081-24985248-c861-40ae-b47d-8079ebd92f1d.png">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2020/png/346819/1594015333313-a4fbb6dc-e84b-4493-99b6-2c9c568ba761.png">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2020/png/346819/1594024317269-03a572de-d7e5-4728-bf62-018a2d8c9cb8.png">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2020/png/346819/1594025570416-019056ef-444f-43da-a5e8-8d6ccd9c8ada.png">
<meta property="article:published_time" content="2020-12-11T07:00:55.000Z">
<meta property="article:modified_time" content="2020-12-11T07:50:37.191Z">
<meta property="article:author" content="Jerome Zhang">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.nlark.com/yuque/0/2020/png/346819/1594027202685-250efc82-2d70-412a-ad3e-37a6176924d0.png">
  
    <link rel="alternative" href="/atom.xml" title="Jerome Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="http://7xkj1z.com1.z0.glb.clouddn.com/head.jpg">
  
  
<link rel="stylesheet" href="/css/style.css">

  
<script>
    (function(){
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
        }
        else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

  
<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-85415703-1', 'auto');
  ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  
<script src="//cdn.bootcss.com/require.js/2.3.2/require.min.js"></script>

  
<script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>


  
<meta name="generator" content="Hexo 5.2.0"></head>
<body>
  <div id="container">
    <div id="particles-js"></div>
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="https://i.loli.net/2020/12/11/tGqjVXEf9b6rM1H.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/"></a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/archives">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/AndyZjy" title="github">github</a>
					        
								<a class="mail" target="_blank" href="/15966685680@163.com" title="mail">mail</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://github.com/smackgg/hexo-theme-smackdown">smackdown</a>
			        
			        </div>
				</section>
				

				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide"></h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="https://i.loli.net/2020/12/11/tGqjVXEf9b6rM1H.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author"></h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/archives">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/AndyZjy" title="github">github</a>
			        
						<a class="mail" target="_blank" href="/15966685680@163.com" title="mail">mail</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-lerna" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/12/11/lerna/" class="article-date">
  	<time datetime="2020-12-11T07:00:55.000Z" itemprop="datePublished">2020-12-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Lerna初探
      
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
        

        
        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="BPMpI" data-lake-id="12b37c98fbf87cd914e80d6823b95196">1、简介</h3>
<p data-lake-id="8e82672f1862e940f4e324455cafdf08">首先是关于Monorepo（<a href="https://zhuanlan.zhihu.com/p/77577415" target="_blank">一篇不错的介绍Monorepo的文章</a>），它是管理项目代码的一种方式，主要手段是通过在一个项目仓库中管理多个模块/仓库包。而Multirepo是传统的仓库管理方法，也是公司目前所用的方法，即所有的项目包都是独立仓库部署和管理。两种方式对比如下：</p>
<p data-lake-id="59543dc7a0fcad8d1445ca5a51269018"><img src="https://cdn.nlark.com/yuque/0/2020/png/346819/1594027202685-250efc82-2d70-412a-ad3e-37a6176924d0.png" alt="image.png" class="image lake-drag-image" title="image.png" data-role="image" data-raw-src="" data-height="495px" /></p>
<p data-lake-id="2a937bd70eb1fc66784e682ebd14b5fd">两种方式进行对比的话，千人千面。前者允许多元化发展（各项目可以有自己的构建工具、依赖管理策略、单元测试方法），后者希望集中管理，减少项目间的差异带来的沟通成本。</p>
<p data-lake-id="cd3a332f22d784bfc474ef20f593408e">虽然拆分子仓库、拆分子 npm 包是进行项目隔离的天然方案，但当仓库内容出现关联时，没有任何一种调试方式比源码放在一起更高效。</p>
<p data-lake-id="6273c882c1b10cd1c30a245e9c10effd">在前端开发环境中，多 Git Repo，多 npm 则是这个理想的阻力，它们导致复用要关心版本号，调试需要 npm link。而这些是 MonoRepo 最大的优势。</p>
<p data-lake-id="84c330999beda36dee9006e665b1a98c">上图中提到的利用相关工具就是今天的主角 Lerna ! Lerna是业界知名度最高的 Monorepo 管理工具，功能完整。而且目前很多大型开源项目都采用了这种方式，比如Babel、React、Meteor、Ember、Jest、Vue等等，当我们查看他们的源码时，可以发现他们的目录都是将主要内容放在packages目录中，分多个模块进行管理。</p>
<h3 id="jU77r" data-lake-id="f2a881389188e92743b5ffba2c3ab97d">2、使用</h3>
<h4 id="HkgxL" data-lake-id="990af1c365fa11610f0aadb9544ef999">2.1、全局安装Lerna</h4>
<div id="OoNGd" class="lake-card-margin lake-selected" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22bash%22%2C%22code%22%3A%22npm%20install%20lerna%20-g%22%2C%22margin%22%3Atrue%2C%22id%22%3A%22OoNGd%22%7D" data-language="bash">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content"><span class="cm-builtin">npm install lerna <span class="cm-attribute">-g</span></span></span></span></span></pre>
</div>
</div>
</div>
<p data-lake-id="d1233715fc463fafba2fe79843e03a7d">或者</p>
<div id="lWntQ" class="lake-card-margin lake-selected" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22bash%22%2C%22code%22%3A%22yarn%20add%20lerna%20-D%22%2C%22margin%22%3Atrue%2C%22id%22%3A%22lWntQ%22%7D" data-language="bash">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">yarn add lerna <span class="cm-attribute">-D</span></span></span></span></pre>
</div>
</div>
</div>
<p data-lake-id="1f07df865af6dbab8ca291677adf9135">安装完成后，在控制台输入lerna -v，只要可以显示版本号，就意味着我们安装成功了。控制台输出如下图：</p>
<p data-lake-id="231fcaa2a360ed995d14c397fdb4b8ae"><span class="lake-card-margin-top lake-card-margin-bottom lake-selected" data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F346819%2F1593596823107-795df9a8-9cb2-4044-9c0b-c607dcbe56ec.png%22%2C%22originWidth%22%3A438%2C%22originHeight%22%3A104%2C%22name%22%3A%22image.png%22%2C%22size%22%3A19320%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A76.69448%2C%22y%22%3A26.456675%2C%22width%22%3A80.21090000000001%2C%22height%22%3A21.977548000000002%2C%22text%22%3A%22Lerna%22%7D%2C%7B%22x%22%3A12.805478%2C%22y%22%3A59.12773%2C%22width%22%3A83.517582%2C%22height%22%3A24.132265000000004%2C%22text%22%3A%223.22.1%22%7D%5D%2C%22style%22%3A%22shadow%22%2C%22search%22%3A%22Lerna%203.22.1%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22width%22%3A438%2C%22height%22%3A104%7D"><img src="https://cdn.nlark.com/yuque/0/2020/png/346819/1593596823107-795df9a8-9cb2-4044-9c0b-c607dcbe56ec.png" alt="image.png" class="image lake-drag-image" title="image.png" data-role="image" data-raw-src="" data-height="104px" /></span></p>
<h4 id="b368R" data-lake-id="8ff2cdec5fc93a98d0af7ede67aa6bbc">2.2、初始化</h4>
<p data-lake-id="3fb18b6b920bd84b3d87c62a8e4f1785">初始化之前的步骤无非两种，第一种是创建一个lerna-repo目录，第二种是在git上创建一个项目lerna-repo并clone到本地，然后本地进入该目录并执行</p>
<div id="gjJTb" class="lake-card-margin lake-selected" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22bash%22%2C%22code%22%3A%22npx%20lerna%20init%22%2C%22margin%22%3Atrue%2C%22id%22%3A%22gjJTb%22%7D" data-language="bash">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">npx lerna init</span></span></span></pre>
</div>
</div>
</div>
<p data-lake-id="3fea212cf77b64ea3d961e18d7d78bd4">一开始我们都是使用lerna的默认模式我们的目录结构会变成如下：</p>
<p data-lake-id="79d2ba6f04ab2ec4b97f57510d542890"><span class="lake-card-margin-top lake-card-margin-bottom lake-selected" data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F346819%2F1593601700780-f6e0fe18-09e2-41e2-ba61-f8f18906edba.png%22%2C%22originWidth%22%3A702%2C%22originHeight%22%3A232%2C%22name%22%3A%22image.png%22%2C%22size%22%3A75336%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A43.063343%2C%22y%22%3A13.806321%2C%22width%22%3A143.252267%2C%22height%22%3A21.068499%2C%22text%22%3A%22LERNA-REPO%22%7D%2C%7B%22x%22%3A115.065994%2C%22y%22%3A57.966675%2C%22width%22%3A113.805966%2C%22height%22%3A24.965455%2C%22text%22%3A%22packages%22%7D%2C%7B%22x%22%3A113.79038%2C%22y%22%3A101.868546%2C%22width%22%3A114.88754%2C%22height%22%3A24.163114000000007%2C%22text%22%3A%22lerna.json%22%7D%2C%7B%22x%22%3A635.1093%2C%22y%22%3A143.78886%2C%22width%22%3A20.862750000000005%2C%22height%22%3A20.862750000000005%2C%22text%22%3A%22U%22%7D%2C%7B%22x%22%3A114.93048%2C%22y%22%3A144.82341%2C%22width%22%3A156.12952%2C%22height%22%3A29.21943999999999%2C%22text%22%3A%22package.json%22%7D%5D%2C%22style%22%3A%22none%22%2C%22search%22%3A%22LERNA-REPO%20packages%20lerna.json%20U%20package.json%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22width%22%3A351%2C%22height%22%3A116%7D"><img src="https://cdn.nlark.com/yuque/0/2020/png/346819/1593601700780-f6e0fe18-09e2-41e2-ba61-f8f18906edba.png" alt="image.png" class="image lake-drag-image" title="image.png" data-role="image" data-raw-src="" data-height="116px" /></span></p>
<p data-lake-id="841d2081e0542459ee78e0f1bea7b423">顾名思义，lerna.json就是Lerna的配置文件，里面可以进行不同的业务或者不同的场景的配置话定义，我们可以查看初始化的lerna.json的文件，如下图：</p>
<p data-lake-id="49ef5bc36bd063c5449e46ffee523487"><span class="lake-card-margin-top lake-card-margin-bottom lake-selected" data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F346819%2F1593601850411-91a9fcea-b92c-41a4-9044-0f7ce8a426e0.png%22%2C%22originWidth%22%3A594%2C%22originHeight%22%3A470%2C%22name%22%3A%22image.png%22%2C%22size%22%3A104680%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A68.79214%2C%22y%22%3A45.40239%2C%22width%22%3A115.57432999999999%2C%22height%22%3A24.13275%2C%22text%22%3A%22lernajson%22%7D%2C%7B%22x%22%3A36.994396%2C%22y%22%3A95.37168%2C%22width%22%3A32.778828%2C%22height%22%3A32.67606000000001%2C%22text%22%3A%22%E6%A7%BF%22%7D%2C%7B%22x%22%3A81.791435%2C%22y%22%3A101.525566%2C%22width%22%3A114.71559499999998%2C%22height%22%3A23.701183999999998%2C%22text%22%3A%22lerna.json%22%7D%2C%7B%22x%22%3A69.73565%2C%22y%22%3A136.4218%2C%22width%22%3A17.685829999999996%2C%22height%22%3A17.685829999999996%2C%22text%22%3A%22123456%22%7D%2C%7B%22x%22%3A180.2147%2C%22y%22%3A176.40211%2C%22width%22%3A134.01055000000002%2C%22height%22%3A24.710380000000015%2C%22text%22%3A%22packages%5C%22%3A%22%7D%2C%7B%22x%22%3A198.0644%2C%22y%22%3A212.00659%2C%22width%22%3A170.68269999999998%2C%22height%22%3A27.5385%2C%22text%22%3A%22%5C%22packages%2F*%5C%22%22%7D%2C%7B%22x%22%3A181.15852%2C%22y%22%3A283.52664%2C%22width%22%3A242.47185000000002%2C%22height%22%3A25.17121000000003%2C%22text%22%3A%22version''%3A%5C%220.0.o%5C%22%22%7D%5D%2C%22style%22%3A%22none%22%2C%22search%22%3A%22lernajson%20%E6%A7%BF%20lerna.json%20123456%20packages%5C%22%3A%20%5C%22packages%2F*%5C%22%20version''%3A%5C%220.0.o%5C%22%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22width%22%3A297%2C%22height%22%3A235%7D"><img src="https://cdn.nlark.com/yuque/0/2020/png/346819/1593601850411-91a9fcea-b92c-41a4-9044-0f7ce8a426e0.png" alt="image.png" class="image lake-drag-image" title="image.png" data-role="image" data-raw-src="" data-height="235px" /></span></p>
<p data-lake-id="5ec4f70c61ff1685fe86ab32b776e074">首先就是packages属性，它的类型是一个数组，在这里可以配置可以发布的npm包的目录，可以根据不同的场景进行定义发布的npm包所在的不同的文件夹。其次的属性version就是当前lerna项目的版本号。</p>
<h4 id="qQPHx" data-lake-id="5e8bde3ea1ecda45ec65f5795fef8609">2.3、引入npm包/生成一个npm包</h4>
<p data-lake-id="36588a5dbd9b304981299b78c66e6916">这里不得不介绍一下引入npm包的强大之处，它可以把你引入的包的git commit记录完整的引入。我们一般都是先将要引入的包下载到本地，命令如下：</p>
<div id="9jM8u" class="lake-card-margin lake-selected" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22bash%22%2C%22code%22%3A%22lerna%20import%20..%2Fuserlogin%20%20%20%22%2C%22margin%22%3Atrue%2C%22id%22%3A%229jM8u%22%7D" data-language="bash">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna import ../userlogin   </span></span></span></pre>
</div>
</div>
</div>
<p data-lake-id="49f4cc326985fb8b8d00bba20416c6dc">如果是新项目，需要新生成一个npm包的话，可以使用如下命令lerna create &lt;包名&gt; [目录]：</p>
<div id="6AVNH" class="lake-card-margin lake-selected" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22bash%22%2C%22code%22%3A%22lerna%20create%20base%20packages%2Fnpm%20%22%2C%22margin%22%3Atrue%2C%22id%22%3A%226AVNH%22%7D" data-language="bash">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna create base packages/npm </span></span></span></pre>
</div>
</div>
</div>
<p data-lake-id="838f3b96ebfc9e9348c2014b5054b963"><span class="lake-fontsize-10">ps:此处npm为原有目录；</span></p>
<p data-lake-id="2abdeebc3148da93d5b37ffd13427d7b">引入一个npm包其实还可以通过进入当前packages文件夹下，通过git clone的方式进行引入，这种优点是可以自由的在某一个项目中进行切换分支，如果是import的方式引入的npm包，目前我是没找到自由切换单项目分支的方式，欢迎大家补充。<span class="lake-fontsize-10"><br /></span></p>
<p data-lake-id="e65b89affd6062ead93a75698b97cd2e">create时，按照lerna的提示输入name、version等属性就好了，如果为了省事可以一路回车走到最后，它就会以默认值的形式生成一个新的npm包。</p>
<p data-lake-id="2482c8de149714cbe98cb796b48e03de">无论是引入的npm包，还是生成的npm包，默认目录都是在当前项目根目录下的packages文件夹下，生成的目录如下：</p>
<p data-lake-id="a617d27acccd4ae98e59a5be1657e098"><span class="lake-card-margin-top lake-card-margin-bottom lake-selected" data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F346819%2F1593602558875-7c9db360-0811-4a87-93ee-6f6110a41663.png%22%2C%22originWidth%22%3A680%2C%22originHeight%22%3A318%2C%22name%22%3A%22image.png%22%2C%22size%22%3A104889%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A32.69912%2C%22y%22%3A17.787706%2C%22width%22%3A143.32973%2C%22height%22%3A20.613692%2C%22text%22%3A%22LERNA-REPO%22%7D%2C%7B%22x%22%3A106.31999%2C%22y%22%3A62.81377%2C%22width%22%3A113.82531999999999%2C%22height%22%3A24.509710000000005%2C%22text%22%3A%22packages%22%7D%2C%7B%22x%22%3A121.15368%2C%22y%22%3A107.07529%2C%22width%22%3A58.10845000000002%2C%22height%22%3A21.857159999999993%2C%22text%22%3A%22base%22%7D%2C%7B%22x%22%3A103.003006%2C%22y%22%3A149.23958%2C%22width%22%3A115.108844%2C%22height%22%3A26.634749999999997%2C%22text%22%3A%22%E5%85%AC_tsts%22%7D%2C%7B%22x%22%3A134.78008%2C%22y%22%3A192.27837%2C%22width%22%3A31.622389999999996%2C%22height%22%3A23.488%2C%22text%22%3A%22lib%22%7D%2C%7B%22x%22%3A137.10165%2C%22y%22%3A239.76424%2C%22width%22%3A155.3967%2C%22height%22%3A24.013409999999993%2C%22text%22%3A%22package.json%22%7D%2C%7B%22x%22%3A138.18797%2C%22y%22%3A281.553%2C%22width%22%3A147.42552999999998%2C%22height%22%3A22.594859999999983%2C%22text%22%3A%22README.Md%22%7D%5D%2C%22style%22%3A%22stroke%22%2C%22search%22%3A%22LERNA-REPO%20packages%20base%20%E5%85%AC_tsts%20lib%20package.json%20README.Md%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22width%22%3A340%2C%22height%22%3A159%7D"><img src="https://cdn.nlark.com/yuque/0/2020/png/346819/1593602558875-7c9db360-0811-4a87-93ee-6f6110a41663.png" alt="image.png" class="image lake-drag-image" title="image.png" data-role="image" data-raw-src="" data-height="159px" /></span></p>
<p data-lake-id="8fedd3e16dfc67abb09c749d438a8bfa">此处会有几种常见的错误展示，第一种就是由于你是新建的lerna项目，没有进行git commit，这时候进行lerna import会报错如下：</p>
<div id="iVwr6" class="lake-card-margin lake-selected" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22bash%22%2C%22code%22%3A%22Error%3A%20Command%20failed%3A%20git%20rev-parse%20HEAD%5Cnlerna%20ERR!%20fatal%3A%20ambiguous%20argument%20'HEAD'%3A%20unknown%20revision%20or%20path%20not%20in%20the%20working%20tree.%5Cnlerna%20ERR!%20Use%20'--'%20to%20separate%20paths%20from%20revisions%2C%20like%20this%3A%5Cnlerna%20ERR!%20'git%20%3Ccommand%3E%20%5B%3Crevision%3E...%5D%20--%20%5B%3Cfile%3E...%5D'%5Cnlerna%20ERR!%20%5Cnlerna%20ERR!%20HEAD%5Cnlerna%20ERR!%20%5Cnlerna%20ERR!%20at%20makeError%20(%2Fusr%2Flocal%2Flib%2Fnode_modules%2Flerna%2Fnode_modules%2Fexeca%2Findex.js%3A174%3A9)%5Cnlerna%20ERR!%20at%20Function.module.exports.sync%20(%2Fusr%2Flocal%2Flib%2Fnode_modules%2Flerna%2Fnode_modules%2Fexeca%2Findex.js%3A338%3A15)%5Cnlerna%20ERR!%20at%20Object.execSync%20(%2Fusr%2Flocal%2Flib%2Fnode_modules%2Flerna%2Fnode_modules%2F%40lerna%2Fchild-process%2Findex.js%3A22%3A16)%5Cnlerna%20ERR!%20at%20ImportCommand.getCurrentSHA%20(%2Fusr%2Flocal%2Flib%2Fnode_modules%2Flerna%2Fnode_modules%2F%40lerna%2Fimport%2Findex.js%3A129%3A34)%5Cnlerna%20ERR!%20at%20ImportCommand.initialize%20(%2Fusr%2Flocal%2Flib%2Fnode_modules%2Flerna%2Fnode_modules%2F%40lerna%2Fimport%2Findex.js%3A98%3A31)%5Cnlerna%20ERR!%20at%20Promise.resolve.then%20(%2Fusr%2Flocal%2Flib%2Fnode_modules%2Flerna%2Fnode_modules%2F%40lerna%2Fcommand%2Findex.js%3A266%3A24)%5Cnlerna%20ERR!%20at%20%3Canonymous%3E%5Cnlerna%20ERR!%20lerna%20Command%20failed%3A%20git%20rev-parse%20HEAD%5Cnlerna%20ERR!%20lerna%20fatal%3A%20ambiguous%20argument%20'HEAD'%3A%20unknown%20revision%20or%20path%20not%20in%20the%20working%20tree.%5Cnlerna%20ERR!%20lerna%20Use%20'--'%20to%20separate%20paths%20from%20revisions%2C%20like%20this%3A%5Cnlerna%20ERR!%20lerna%20'git%20%3Ccommand%3E%20%5B%3Crevision%3E...%5D%20--%20%5B%3Cfile%3E...%5D'%5Cnlerna%20ERR!%20lerna%20%5Cnlerna%20ERR!%20lerna%20HEAD%22%2C%22margin%22%3Atrue%2C%22id%22%3A%22iVwr6%22%7D" data-language="bash">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">Error: Command failed: <span class="cm-builtin">git rev-parse HEAD
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">lerna ERR! fatal: ambiguous argument <span class="cm-string">'HEAD': unknown revision or path not <span class="cm-keyword">in the working tree.
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">lerna ERR! Use <span class="cm-string">'--' to separate paths from revisions, like this:
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">lerna ERR! <span class="cm-string">'git &lt;command&gt; [&lt;revision&gt;...] -- [&lt;file&gt;...]'
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">lerna ERR! 
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">lerna ERR! HEAD
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">lerna ERR! 
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">lerna ERR! at makeError (/usr/local/lib/node_modules/lerna/node_modules/execa/index.js:174:9)
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">lerna ERR! at Function.module.exports.sync (/usr/local/lib/node_modules/lerna/node_modules/execa/index.js:338:15)
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna ERR! at Object.execSync (/usr/local/lib/node_modules/lerna/node_modules/@lerna/child-process/index.js:22:16)
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna ERR! at ImportCommand.getCurrentSHA (/usr/local/lib/node_modules/lerna/node_modules/@lerna/import/index.js:129:34)
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna ERR! at ImportCommand.initialize (/usr/local/lib/node_modules/lerna/node_modules/@lerna/import/index.js:98:31)
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna ERR! at Promise.resolve.then (/usr/local/lib/node_modules/lerna/node_modules/@lerna/command/index.js:266:24)
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna ERR! at &lt;anonymous&gt;
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna ERR! lerna Command failed: <span class="cm-builtin">git rev-parse HEAD
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna ERR! lerna fatal: ambiguous argument <span class="cm-string">'HEAD': unknown revision or path not <span class="cm-keyword">in the working tree.
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna ERR! lerna Use <span class="cm-string">'--' to separate paths from revisions, like this:
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna ERR! lerna <span class="cm-string">'git &lt;command&gt; [&lt;revision&gt;...] -- [&lt;file&gt;...]'
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna ERR! lerna 
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna ERR! lerna HEAD</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre>
</div>
</div>
</div>
<p data-lake-id="88380c1dc21c77a21fc8423465f64203">如果你没有初始化git项目的话，会有如下报错：</p>
<div id="9fwj9" class="lake-card-margin lake-selected" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22bash%22%2C%22code%22%3A%22cli%20v3.8.0%5Cnlerna%20ERR!%20Error%3A%20Command%20failed%3A%20git%20log%20--format%3D%25h%5Cnlerna%20ERR!%20fatal%3A%20Not%20a%20git%20repository%20(or%20any%20of%20the%20parent%20directories)%3A%20.git%5Cnlerna%20ERR!%20%5Cnlerna%20ERR!%20%5Cnlerna%20ERR!%20at%20makeError%20(%2Fusr%2Flocal%2Flib%2Fnode_modules%2Flerna%2Fnode_modules%2Fexeca%2Findex.js%3A174%3A9)%5Cnlerna%20ERR!%20at%20Function.module.exports.sync%20(%2Fusr%2Flocal%2Flib%2Fnode_modules%2Flerna%2Fnode_modules%2Fexeca%2Findex.js%3A338%3A15)%5Cnlerna%20ERR!%20at%20Object.execSync%20(%2Fusr%2Flocal%2Flib%2Fnode_modules%2Flerna%2Fnode_modules%2F%40lerna%2Fchild-process%2Findex.js%3A22%3A16)%5Cnlerna%20ERR!%20at%20ImportCommand.externalExecSync%20(%2Fusr%2Flocal%2Flib%2Fnode_modules%2Flerna%2Fnode_modules%2F%40lerna%2Fimport%2Findex.js%3A137%3A34)%5Cnlerna%20ERR!%20at%20ImportCommand.initialize%20(%2Fusr%2Flocal%2Flib%2Fnode_modules%2Flerna%2Fnode_modules%2F%40lerna%2Fimport%2Findex.js%3A82%3A25)%5Cnlerna%20ERR!%20at%20Promise.resolve.then%20(%2Fusr%2Flocal%2Flib%2Fnode_modules%2Flerna%2Fnode_modules%2F%40lerna%2Fcommand%2Findex.js%3A266%3A24)%5Cnlerna%20ERR!%20at%20%3Canonymous%3E%5Cnlerna%20ERR!%20lerna%20Command%20failed%3A%20git%20log%20--format%3D%25h%5Cnlerna%20ERR!%20lerna%20fatal%3A%20Not%20a%20git%20repository%20(or%20any%20of%20the%20parent%20directories)%3A%20.git%5Cnlerna%20ERR!%20lerna%20%22%2C%22margin%22%3Atrue%2C%22id%22%3A%229fwj9%22%7D" data-language="bash">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">cli v3.8.0
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">lerna ERR! Error: Command failed: <span class="cm-builtin">git log <span class="cm-attribute">--format<span class="cm-operator">=%h
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">lerna ERR! fatal: Not a <span class="cm-builtin">git repository (or any of the parent directories): .git
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">lerna ERR! 
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">lerna ERR! 
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">lerna ERR! at makeError (/usr/local/lib/node_modules/lerna/node_modules/execa/index.js:174:9)
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">lerna ERR! at Function.module.exports.sync (/usr/local/lib/node_modules/lerna/node_modules/execa/index.js:338:15)
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">lerna ERR! at Object.execSync (/usr/local/lib/node_modules/lerna/node_modules/@lerna/child-process/index.js:22:16)
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">lerna ERR! at ImportCommand.externalExecSync (/usr/local/lib/node_modules/lerna/node_modules/@lerna/import/index.js:137:34)
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna ERR! at ImportCommand.initialize (/usr/local/lib/node_modules/lerna/node_modules/@lerna/import/index.js:82:25)
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna ERR! at Promise.resolve.then (/usr/local/lib/node_modules/lerna/node_modules/@lerna/command/index.js:266:24)
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna ERR! at &lt;anonymous&gt;
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna ERR! lerna Command failed: <span class="cm-builtin">git log <span class="cm-attribute">--format<span class="cm-operator">=%h
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna ERR! lerna fatal: Not a <span class="cm-builtin">git repository (or any of the parent directories): .git
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna ERR! lerna </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre>
</div>
</div>
</div>
<p data-lake-id="8d503fd1d4050e282f5e13e786e7a09a">但是如果原项目是具有合并提交冲突的存储库时，import命令便无法尝试应用所有提交。此时可以使用 --flatten命令标志来请求导入固定的历史记录，也就是将每次合并提交作为单独的更改，引入合并。报错如下：</p>
<div id="NnklF" class="lake-card-margin lake-selected" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22lerna%20ERR!%20import%20Rolling%20back%20to%20previous%20HEAD%20(commit%20e232dec13e7a62943567257eff8573db2eb1a19e)%5Cnlerna%20ERR!%20EIMPORT%20Failed%20to%20apply%20commit%202aafdfd.%5Cnlerna%20ERR!%20EIMPORT%20Command%20failed%3A%20git%20am%20-3%20--keep-non-patch%5Cnlerna%20ERR!%20EIMPORT%20Can't%20find%20Husky%2C%20skipping%20applypatch-msg%20hook%5Cnlerna%20ERR!%20EIMPORT%20You%20can%20reinstall%20it%20using%20'npm%20install%20husky%20--save-dev'%20or%20delete%20this%20hook%5Cnlerna%20ERR!%20EIMPORT%20error%3A%20Failed%20to%20merge%20in%20the%20changes.%5Cnlerna%20ERR!%20EIMPORT%20hint%3A%20Use%20'git%20am%20--show-current-patch'%20to%20see%20the%20failed%20patch%5Cnlerna%20ERR!%20EIMPORT%20Applying%3A%20feat(component)%3A%20add%20chromeDownload%20component%5Cnlerna%20ERR!%20EIMPORT%20Using%20index%20info%20to%20reconstruct%20a%20base%20tree...%5Cnlerna%20ERR!%20EIMPORT%20M%20%20%20%20packages%2Fdt-react-component%2F.storybook%2Fconfig.js%5Cnlerna%20ERR!%20EIMPORT%20Falling%20back%20to%20patching%20base%20and%203-way%20merge...%5Cnlerna%20ERR!%20EIMPORT%20Auto-merging%20packages%2Fdt-react-component%2F.storybook%2Fconfig.js%5Cnlerna%20ERR!%20EIMPORT%20CONFLICT%20(content)%3A%20Merge%20conflict%20in%20packages%2Fdt-react-component%2F.storybook%2Fconfig.js%5Cnlerna%20ERR!%20EIMPORT%20Patch%20failed%20at%200001%20feat(component)%3A%20add%20chromeDownload%20component%5Cnlerna%20ERR!%20EIMPORT%20When%20you%20have%20resolved%20this%20problem%2C%20run%20%5C%22git%20am%20--continue%5C%22.%5Cnlerna%20ERR!%20EIMPORT%20If%20you%20prefer%20to%20skip%20this%20patch%2C%20run%20%5C%22git%20am%20--skip%5C%22%20instead.%5Cnlerna%20ERR!%20EIMPORT%20To%20restore%20the%20original%20branch%20and%20stop%20patching%2C%20run%20%5C%22git%20am%20--abort%5C%22.%5Cnlerna%20ERR!%20EIMPORT%20%5Cnlerna%20ERR!%20EIMPORT%20%5Cnlerna%20ERR!%20EIMPORT%20You%20may%20try%20again%20with%20--flatten%20to%20import%20flat%20history.%22%2C%22margin%22%3Atrue%2C%22id%22%3A%22NnklF%22%7D" data-language="plain">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">lerna ERR! import Rolling back to previous HEAD (commit e232dec13e7a62943567257eff8573db2eb1a19e)
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">lerna ERR! EIMPORT Failed to apply commit 2aafdfd.
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">lerna ERR! EIMPORT Command failed: git am -3 --keep-non-patch
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">lerna ERR! EIMPORT Can't find Husky, skipping applypatch-msg hook
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">lerna ERR! EIMPORT You can reinstall it using 'npm install husky --save-dev' or delete this hook
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">lerna ERR! EIMPORT error: Failed to merge in the changes.
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">lerna ERR! EIMPORT hint: Use 'git am --show-current-patch' to see the failed patch
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">lerna ERR! EIMPORT Applying: feat(component): add chromeDownload component
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">lerna ERR! EIMPORT Using index info to reconstruct a base tree...
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna ERR! EIMPORT M    packages/dt-react-component/.storybook/config.js
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna ERR! EIMPORT Falling back to patching base and 3-way merge...
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna ERR! EIMPORT Auto-merging packages/dt-react-component/.storybook/config.js
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna ERR! EIMPORT CONFLICT (content): Merge conflict in packages/dt-react-component/.storybook/config.js
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna ERR! EIMPORT Patch failed at 0001 feat(component): add chromeDownload component
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna ERR! EIMPORT When you have resolved this problem, run "git am --continue".
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna ERR! EIMPORT If you prefer to skip this patch, run "git am --skip" instead.
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna ERR! EIMPORT To restore the original branch and stop patching, run "git am --abort".
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna ERR! EIMPORT 
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna ERR! EIMPORT 
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna ERR! EIMPORT You may try again with --flatten to import flat history.</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre>
</div>
</div>
</div>
<p data-lake-id="705e144739128cf9ed56da0007b86597">命令如下：</p>
<div id="wkGAJ" class="lake-selected" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22bash%22%2C%22code%22%3A%22%24%20lerna%20import%20..%2Fbase%20--flatten%22%2C%22id%22%3A%22wkGAJ%22%7D" data-language="bash">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content"><span class="cm-def">$ lerna import ../base <span class="cm-attribute">--flatten</span></span></span></span></span></pre>
</div>
</div>
</div>
<h4 id="CUsN7" data-lake-id="36a8b6fc865649cf490d01d03e4438b4">2.4、显示当前列表</h4>
<div id="JTNFR" class="lake-card-margin lake-selected" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22bash%22%2C%22code%22%3A%22lerna%20list%22%2C%22margin%22%3Atrue%2C%22id%22%3A%22JTNFR%22%7D" data-language="bash">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna list</span></span></span></pre>
</div>
</div>
</div>
<h4 id="BgccG" data-lake-id="53c4e03b4edcea329787c0214f6fed6a">2.5、 为项目包添加依赖</h4>
<p data-lake-id="b4f0ab10411e31c557dcefc2a99dc1fd">命令格式：</p>
<div id="90WzV" class="lake-card-margin lake-selected" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22bash%22%2C%22code%22%3A%22lerna%20add%20%E5%8C%85%E5%90%8D%20%5B--scope%3D%E7%89%B9%E5%AE%9A%E7%9A%84%E6%9F%90%E4%B8%AA%E5%8C%85%5D%22%2C%22margin%22%3Atrue%2C%22id%22%3A%2290WzV%22%7D" data-language="bash">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna add 包名 <span class="cm-def">[--scope<span class="cm-operator">=特定的某个包]</span></span></span></span></span></pre>
</div>
</div>
</div>
<p data-lake-id="a04be26de522275bc6ec0a5063448f21">例子：</p>
<div id="eEj31" class="lake-card-margin lake-selected" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22bash%22%2C%22code%22%3A%22lerna%20add%20component%20--scope%3Dbase%22%2C%22margin%22%3Atrue%2C%22id%22%3A%22eEj31%22%7D" data-language="bash">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna add component <span class="cm-attribute">--scope<span class="cm-operator">=base</span></span></span></span></span></pre>
</div>
</div>
</div>
<p data-lake-id="d87931fa85ce20654ebaec8c1e26b635">如上面例子代码，执行成功这段代码后，我们可以在base项目中引用component的包了，而且会自动把component包的版本号更新到base包的package.json中。此处需要注意，如果我们add的包不在我们的packages目录下，它就会自动从npm的仓库上进行下载，并且因为加了scope，所以只会给base包进行安装依赖，如果不加scope这段代码的话，会自动给packages目录下所有的包更新安装component依赖。如果原项目中在package.json中有当前npm包的配置，那么这行命令会将原配置删除，并新增当前最新版本的npm包，保证其的版本实时性。</p>
<h4 id="y11mW" data-lake-id="b36f3a2da00a6927e6d51ae6401a44e4">2.6、为每个包安装依赖</h4>
<div id="Ooulc" class="lake-card-margin lake-selected" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22bash%22%2C%22code%22%3A%22lerna%20bootstrap%20--scope%3D%E7%89%B9%E5%AE%9A%E7%9A%84%E6%9F%90%E4%B8%AA%E5%8C%85%22%2C%22margin%22%3Atrue%2C%22id%22%3A%22Ooulc%22%7D" data-language="bash">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna bootstrap <span class="cm-attribute">--scope<span class="cm-operator">=特定的某个包</span></span></span></span></span></pre>
</div>
</div>
</div>
<p data-lake-id="70842d493533e280f1ed570529a3b5cb">这行代码功能和npm install或者yarn差不多，如果不加后缀scope，lerna会自动把当前工程下的所有包的依赖都安装好。</p>
<p data-lake-id="6a05fb8f093f58991d80def42b0168af">请注意，Lerna在这有一个非常强大的功能，</p>
<h4 id="Iv1kd" data-lake-id="91d1e2346e98362f930686aced58fe76">2.7、删除某个包的依赖</h4>
<div id="Cfk3K" class="lake-card-margin lake-selected" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22bash%22%2C%22code%22%3A%22lerna%20clean%20--scope%3D%E7%89%B9%E5%AE%9A%E7%9A%84%E6%9F%90%E4%B8%AA%E5%8C%85%22%2C%22margin%22%3Atrue%2C%22id%22%3A%22Cfk3K%22%7D" data-language="bash">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna clean <span class="cm-attribute">--scope<span class="cm-operator">=特定的某个包</span></span></span></span></span></pre>
</div>
</div>
</div>
<p data-lake-id="662aa1f80002246097e1e45a8a9aa0f0">同安装依赖，这行代码就是删除某个包的依赖，跟rm -rf node_modules功能一致，将某个项目的node_modules删除，如果不加scope，就会默认删除全部项目的依赖，如下图，会出现提示：</p>
<h4 id="YZOrH" data-lake-id="19e3f52e9380bce90431618de30d0f23"><span class="lake-card-margin-top lake-card-margin-bottom lake-selected" data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F346819%2F1594014883318-d9c11a38-df02-4622-b116-4de45bcd71a4.png%22%2C%22originWidth%22%3A1086%2C%22originHeight%22%3A206%2C%22name%22%3A%22image.png%22%2C%22size%22%3A216799%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A398.98547%2C%22y%22%3A10.388052%2C%22width%22%3A150.79717999999997%2C%22height%22%3A22.730207999999998%2C%22text%22%3A%22Lernaclean%22%7D%2C%7B%22x%22%3A59.65924%2C%22y%22%3A11.264729%2C%22width%22%3A148.57289000000003%2C%22height%22%3A23.788528%2C%22text%22%3A%22Lerna-repo%22%7D%2C%7B%22x%22%3A182.8908%2C%22y%22%3A9.995335%2C%22width%22%3A189.73057%2C%22height%22%3A28.412155000000002%2C%22text%22%3A%22pogit%3A(master)%22%7D%2C%7B%22x%22%3A103.73534%2C%22y%22%3A36.287388%2C%22width%22%3A252.24016%2C%22height%22%3A27.277847%2C%22text%22%3A%22noticecliv3.22.1%22%7D%2C%7B%22x%22%3A20.364494%2C%22y%22%3A39.25018%2C%22width%22%3A68.710991%2C%22height%22%3A20.31049%2C%22text%22%3A%22lerna%22%7D%2C%7B%22x%22%3A99.977715%2C%22y%22%3A60.20119%2C%22width%22%3A563.564685%2C%22height%22%3A33.499005%2C%22text%22%3A%22infoRemovingthefoilowingdirectoris%22%7D%2C%7B%22x%22%3A18.26901%2C%22y%22%3A66.08093%2C%22width%22%3A69.38773%2C%22height%22%3A22.178225000000012%2C%22text%22%3A%22Lerna%22%7D%2C%7B%22x%22%3A101.84785%2C%22y%22%3A93.3984%2C%22width%22%3A520.7257%2C%22height%22%3A27.332819999999998%2C%22text%22%3A%22infocleanpackages%2Fbase%2Fnode_modules%22%7D%2C%7B%22x%22%3A19.768158%2C%22y%22%3A94.62335%2C%22width%22%3A69.957522%2C%22height%22%3A22.371049999999997%2C%22text%22%3A%22Lerna%22%7D%2C%7B%22x%22%3A102.351006%2C%22y%22%3A118.876366%2C%22width%22%3A136.997324%2C%22height%22%3A26.258964000000006%2C%22text%22%3A%22infoclean%22%7D%2C%7B%22x%22%3A19.879377%2C%22y%22%3A122.758095%2C%22width%22%3A67.838663%2C%22height%22%3A23.15946500000001%2C%22text%22%3A%22Lerna%22%7D%2C%7B%22x%22%3A251.63354%2C%22y%22%3A121.05416%2C%22width%22%3A509.26892999999995%2C%22height%22%3A26.376170000000002%2C%22text%22%3A%22packages%2Fdt-batch-works%2Fnode_modue%22%7D%2C%7B%22x%22%3A172.49205%2C%22y%22%3A149.06969%2C%22width%22%3A517.6883499999999%2C%22height%22%3A24.046579999999977%2C%22text%22%3A%22cleanpackages%2Fdt-common%2Fodeodue%22%7D%2C%7B%22x%22%3A19.551075%2C%22y%22%3A149.19989%2C%22width%22%3A140.599515%2C%22height%22%3A23.871409999999997%2C%22text%22%3A%22Lernainfo%22%7D%2C%7B%22x%22%3A42.983646%2C%22y%22%3A177.13312%2C%22width%22%3A113.44275400000001%2C%22height%22%3A23.08716000000001%2C%22text%22%3A%22Proceed%3F%22%7D%2C%7B%22x%22%3A179.51993%2C%22y%22%3A177.61343%2C%22width%22%3A61.08764000000002%2C%22height%22%3A23.610980000000012%2C%22text%22%3A%22(ynh)%22%7D%5D%2C%22style%22%3A%22none%22%2C%22search%22%3A%22Lernaclean%20Lerna-repo%20pogit%3A(master)%20noticecliv3.22.1%20lerna%20infoRemovingthefoilowingdirectoris%20Lerna%20infocleanpackages%2Fbase%2Fnode_modules%20Lerna%20infoclean%20Lerna%20packages%2Fdt-batch-works%2Fnode_modue%20cleanpackages%2Fdt-common%2Fodeodue%20Lernainfo%20Proceed%3F%20(ynh)%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22width%22%3A543%2C%22height%22%3A103%7D"><img src="https://cdn.nlark.com/yuque/0/2020/png/346819/1594014883318-d9c11a38-df02-4622-b116-4de45bcd71a4.png" alt="image.png" class="image lake-drag-image" title="image.png" data-role="image" data-raw-src="" data-height="103px" /></span></h4>
<h4 id="pw5ji" data-lake-id="1941f57d4f599ba59cc30f16d9a3faa8">2.8、运行项目中的script命令</h4>
<div id="ScJhL" class="lake-card-margin lake-selected" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22bash%22%2C%22code%22%3A%22lerna%20run%20%E5%91%BD%E4%BB%A4%20--scope%3D%E7%89%B9%E5%AE%9A%E7%9A%84%E6%9F%90%E4%B8%AA%E5%8C%85%22%2C%22margin%22%3Atrue%2C%22id%22%3A%22ScJhL%22%7D" data-language="bash">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna run 命令 <span class="cm-attribute">--scope<span class="cm-operator">=特定的某个包</span></span></span></span></span></pre>
</div>
</div>
</div>
<p data-lake-id="af6db61c247e79480738eb8cb605cc8b">这里可以运行start等约定好的script命令，同理，如果没有scope后缀，lerna会运行每个包的该script命令，截图如下：</p>
<p data-lake-id="fb41c11876530da3fa4e81eed7b29e30"><span class="lake-card-margin-top lake-card-margin-bottom lake-selected" data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F346819%2F1594015055046-1d39a385-960c-458d-934a-ff90876f2cfe.png%22%2C%22originWidth%22%3A984%2C%22originHeight%22%3A134%2C%22name%22%3A%22image.png%22%2C%22size%22%3A101810%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A50.442398%2C%22y%22%3A3.4195254%2C%22width%22%3A314.06900199999995%2C%22height%22%3A29.2437206%2C%22text%22%3A%22Lerna-repogit%3A(master)%22%7D%2C%7B%22x%22%3A379.84946%2C%22y%22%3A7.9874544%2C%22width%22%3A210.76544%2C%22height%22%3A23.2789416%2C%22text%22%3A%22lernarunstart%22%7D%2C%7B%22x%22%3A220.49521%2C%22y%22%3A36.39918%2C%22width%22%3A119.28137000000004%2C%22height%22%3A25.20847%2C%22text%22%3A%22iV3.22.1%22%7D%2C%7B%22x%22%3A84.77785%2C%22y%22%3A36.89677%2C%22width%22%3A120.33385999999999%2C%22height%22%3A21.25242%2C%22text%22%3A%22noticecl%22%7D%2C%7B%22x%22%3A6.300291%2C%22y%22%3A37.80866%2C%22width%22%3A66.420404%2C%22height%22%3A20.474145999999998%2C%22text%22%3A%22lerna%22%7D%2C%7B%22x%22%3A620.3608%2C%22y%22%3A65.07514%2C%22width%22%3A56.979169999999954%2C%22height%22%3A22.51119%2C%22text%22%3A%22%5C%22npm%22%7D%2C%7B%22x%22%3A4.5221143%2C%22y%22%3A65.42757%2C%22width%22%3A595.6601357%2C%22height%22%3A23.008889999999994%2C%22text%22%3A%22LernainfoExecutingcommandinpackages%22%7D%2C%7B%22x%22%3A744.5004%2C%22y%22%3A64.78263%2C%22width%22%3A81.24105999999995%2C%22height%22%3A22.109160000000003%2C%22text%22%3A%22start'%22%7D%2C%7B%22x%22%3A687.9334%2C%22y%22%3A67.05629%2C%22width%22%3A41.51062999999999%2C%22height%22%3A19.002709999999993%2C%22text%22%3A%22run%22%7D%5D%2C%22style%22%3A%22none%22%2C%22search%22%3A%22Lerna-repogit%3A(master)%20lernarunstart%20iV3.22.1%20noticecl%20lerna%20%5C%22npm%20LernainfoExecutingcommandinpackages%20start'%20run%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22width%22%3A492%2C%22height%22%3A67%7D"><img src="https://cdn.nlark.com/yuque/0/2020/png/346819/1594015055046-1d39a385-960c-458d-934a-ff90876f2cfe.png" alt="image.png" class="image lake-drag-image" title="image.png" data-role="image" data-raw-src="" data-height="67px" /></span></p>
<h4 id="XZSln" data-lake-id="15c5a0d40bc5d31dab1c5142703b1220">2.9、查看可以发布的包</h4>
<div id="gMn6T" class="lake-card-margin lake-selected" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22bash%22%2C%22code%22%3A%22lerna%20changed%22%2C%22margin%22%3Atrue%2C%22id%22%3A%22gMn6T%22%7D" data-language="bash">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna changed</span></span></span></pre>
</div>
</div>
</div>
<p data-lake-id="25177b5c1f5af547e2c20f2930866867">该命令是查看当前可以发布的包，<span class="lake-fontsize-12">显示自上次relase tag以来有修改的包，输入后展示图会与下图类似：</span></p>
<p data-lake-id="cfad7ff3917f4ef614d8fa69dc4222d8"><span class="lake-card-margin-top lake-card-margin-bottom lake-selected" data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F346819%2F1594015212081-24985248-c861-40ae-b47d-8079ebd92f1d.png%22%2C%22originWidth%22%3A780%2C%22originHeight%22%3A220%2C%22name%22%3A%22image.png%22%2C%22size%22%3A154499%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A67.98304%2C%22y%22%3A13.618989%2C%22width%22%3A521.41116%2C%22height%22%3A27.080458999999998%2C%22text%22%3A%22Lerna-repogit%3A(master)lernachanged%22%7D%2C%7B%22x%22%3A28.30762%2C%22y%22%3A44.82382%2C%22width%22%3A70.585515%2C%22height%22%3A20.115274999999997%2C%22text%22%3A%22Lerna%22%7D%2C%7B%22x%22%3A112.60402%2C%22y%22%3A43.050987%2C%22width%22%3A254.07389999999998%2C%22height%22%3A26.369193000000003%2C%22text%22%3A%22noticecliv3.22.1%22%7D%2C%7B%22x%22%3A111.241974%2C%22y%22%3A68.80839%2C%22width%22%3A477.8551259999999%2C%22height%22%3A30.79446%2C%22text%22%3A%22infoAssumingaltpackageschanged%22%7D%2C%7B%22x%22%3A29.44675%2C%22y%22%3A72.52567%2C%22width%22%3A69.59545599999998%2C%22height%22%3A21.63642999999999%2C%22text%22%3A%22lerna%22%7D%2C%7B%22x%22%3A28.818897%2C%22y%22%3A100.89513%2C%22width%22%3A55.214009%2C%22height%22%3A20.646640000000005%2C%22text%22%3A%22base%22%7D%2C%7B%22x%22%3A28.201097%2C%22y%22%3A125.80742%2C%22width%22%3A195.960003%2C%22height%22%3A25.10382%2C%22text%22%3A%22dt-batch-works%22%7D%2C%7B%22x%22%3A26.937094%2C%22y%22%3A156.91896%2C%22width%22%3A128.419226%2C%22height%22%3A21.993930000000006%2C%22text%22%3A%22dt-common%22%7D%2C%7B%22x%22%3A225.28603%2C%22y%22%3A183.97476%2C%22width%22%3A75.88046999999997%2C%22height%22%3A21.842089999999985%2C%22text%22%3A%22found%22%7D%2C%7B%22x%22%3A282.43152%2C%22y%22%3A183.68564%2C%22width%22%3A406.25527999999997%2C%22height%22%3A25.68030999999999%2C%22text%22%3A%22nd3packagesreadytopublish%22%7D%2C%7B%22x%22%3A27.55167%2C%22y%22%3A185.6506%2C%22width%22%3A183.47926999999999%2C%22height%22%3A21.713250000000016%2C%22text%22%3A%22LernaSuccess%22%7D%5D%2C%22style%22%3A%22none%22%2C%22search%22%3A%22Lerna-repogit%3A(master)lernachanged%20Lerna%20noticecliv3.22.1%20infoAssumingaltpackageschanged%20lerna%20base%20dt-batch-works%20dt-common%20found%20nd3packagesreadytopublish%20LernaSuccess%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22width%22%3A390%2C%22height%22%3A110%7D"><img src="https://cdn.nlark.com/yuque/0/2020/png/346819/1594015212081-24985248-c861-40ae-b47d-8079ebd92f1d.png" alt="image.png" class="image lake-drag-image" title="image.png" data-role="image" data-raw-src="" data-height="110px" /></span></p>
<p data-lake-id="180490bc83301185c4f326c60419f362">如图展示，当前有三个包可以进行发布，但是如果你发布完以后再执行该命令，此处就会展示No changed packages found。</p>
<h4 id="jFxYC" data-lake-id="49b3e12a2c2710d2acd256d6d84b1dc3">2.10、发布某个项目</h4>
<div id="rbHwc" class="lake-card-margin lake-selected" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22bash%22%2C%22code%22%3A%22lerna%20publish%20--dist-tag%3Dtag%E5%90%8D%22%2C%22margin%22%3Atrue%2C%22id%22%3A%22rbHwc%22%7D" data-language="bash">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna publish <span class="cm-attribute">--dist<span class="cm-attribute">-tag<span class="cm-operator">=tag名</span></span></span></span></span></span></pre>
</div>
</div>
</div>
<p data-lake-id="e0aacef6659f4170b0e884d470950791">输入该命令后，会展示如下图：</p>
<p data-lake-id="f6a50c2f4d533d94c3cff81dc2a702df"><span class="lake-card-margin-top lake-card-margin-bottom lake-selected" data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F346819%2F1594015333313-a4fbb6dc-e84b-4493-99b6-2c9c568ba761.png%22%2C%22originWidth%22%3A1088%2C%22originHeight%22%3A378%2C%22name%22%3A%22image.png%22%2C%22size%22%3A271164%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A399.32%2C%22y%22%3A4.060418%2C%22width%22%3A186.31509999999997%2C%22height%22%3A29.340209%2C%22text%22%3A%22Lernapublish%22%7D%2C%7B%22x%22%3A59.774998%2C%22y%22%3A4.22641%2C%22width%22%3A324.78540200000003%2C%22height%22%3A28.592563999999996%2C%22text%22%3A%22Lerna-repogit%3A(master)%22%7D%2C%7B%22x%22%3A22.47145%2C%22y%22%3A33.174084%2C%22width%22%3A336.73637%2C%22height%22%3A25.24004%2C%22text%22%3A%22Lernanoticecliv3.22.1%22%7D%2C%7B%22x%22%3A25.07168%2C%22y%22%3A59.93031%2C%22width%22%3A446.11524%2C%22height%22%3A25.871550000000006%2C%22text%22%3A%22Lernainfocurrentversion0.0.0%22%7D%2C%7B%22x%22%3A31.713654%2C%22y%22%3A90.22309%2C%22width%22%3A544.039706%2C%22height%22%3A23.834519999999998%2C%22text%22%3A%22Lernainfoassumingalulpackageschanged%22%7D%2C%7B%22x%22%3A47.75429%2C%22y%22%3A114.09977%2C%22width%22%3A771.79571%2C%22height%22%3A28.181749999999994%2C%22text%22%3A%22SeLectanewversion(curRentLy0.erowke)%22%7D%2C%7B%22x%22%3A47.42281%2C%22y%22%3A144.97525%2C%22width%22%3A177.48391%2C%22height%22%3A23.01430000000002%2C%22text%22%3A%22Patch(0.0.1)%22%7D%2C%7B%22x%22%3A47.066425%2C%22y%22%3A171.44035%2C%22width%22%3A180.99245499999998%2C%22height%22%3A23.990129999999994%2C%22text%22%3A%22MinoR(0.1.0)%22%7D%2C%7B%22x%22%3A46.428467%2C%22y%22%3A201.22092%2C%22width%22%3A181.036973%2C%22height%22%3A25.09899999999999%2C%22text%22%3A%22Major(1.0.0)%22%7D%2C%7B%22x%22%3A48.16641%2C%22y%22%3A228.21516%2C%22width%22%3A335.58203000000003%2C%22height%22%3A25.66332%2C%22text%22%3A%22Prepatch(0.0.1-alpha.o)%22%7D%2C%7B%22x%22%3A49.635002%2C%22y%22%3A257.18542%2C%22width%22%3A116.709568%2C%22height%22%3A23.692379999999957%2C%22text%22%3A%22Preminor%22%7D%2C%7B%22x%22%3A178.89471%2C%22y%22%3A257.81552%2C%22width%22%3A202.74969000000002%2C%22height%22%3A24.108180000000004%2C%22text%22%3A%22(0.1.0-alpha.o)%22%7D%2C%7B%22x%22%3A48.01502%2C%22y%22%3A285.6205%2C%22width%22%3A118.88589000000002%2C%22height%22%3A23.897800000000018%2C%22text%22%3A%22Premajor%22%7D%2C%7B%22x%22%3A180.44893%2C%22y%22%3A286.28207%2C%22width%22%3A202.47682%2C%22height%22%3A23.233550000000037%2C%22text%22%3A%22(1.0.0-alpha.o)%22%7D%2C%7B%22x%22%3A48.318726%2C%22y%22%3A313.52786%2C%22width%22%3A241.53091400000002%2C%22height%22%3A25.29236000000003%2C%22text%22%3A%22CustomPrereLease%22%7D%2C%7B%22x%22%3A50.700653%2C%22y%22%3A342.13382%2C%22width%22%3A195.422147%2C%22height%22%3A22.185419999999965%2C%22text%22%3A%22CustomVersion%22%7D%5D%2C%22style%22%3A%22none%22%2C%22search%22%3A%22Lernapublish%20Lerna-repogit%3A(master)%20Lernanoticecliv3.22.1%20Lernainfocurrentversion0.0.0%20Lernainfoassumingalulpackageschanged%20SeLectanewversion(curRentLy0.erowke)%20Patch(0.0.1)%20MinoR(0.1.0)%20Major(1.0.0)%20Prepatch(0.0.1-alpha.o)%20Preminor%20(0.1.0-alpha.o)%20Premajor%20(1.0.0-alpha.o)%20CustomPrereLease%20CustomVersion%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22width%22%3A544%2C%22height%22%3A189%7D"><img src="https://cdn.nlark.com/yuque/0/2020/png/346819/1594015333313-a4fbb6dc-e84b-4493-99b6-2c9c568ba761.png" alt="image.png" class="image lake-drag-image" title="image.png" data-role="image" data-raw-src="" data-height="189px" /></span></p>
<p data-lake-id="71b132a5d0b1c7fb9c63dad1a1f86a48">在上图中，控制台会让用户选择要发布的版本的版本号，最后一个选项为自定义选项。--dist-tag=tag名为发布某一个分支的包，主要用于测试或者多版本并存的情况。发布模式如下图：</p>
<p data-lake-id="4ce3de762ced0980c54f453ba3a7049c"><span class="lake-card-margin-top lake-card-margin-bottom lake-selected" data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F346819%2F1594024317269-03a572de-d7e5-4728-bf62-018a2d8c9cb8.png%22%2C%22originWidth%22%3A1332%2C%22originHeight%22%3A766%2C%22name%22%3A%22image.png%22%2C%22size%22%3A144751%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A582.27655%2C%22y%22%3A21.522907%2C%22width%22%3A171.36858999999993%2C%22height%22%3A28.654667%2C%22text%22%3A%22lernapublish%22%7D%2C%7B%22x%22%3A46.011436%2C%22y%22%3A98.54581%2C%22width%22%3A143.411154%2C%22height%22%3A31.508539999999996%2C%22text%22%3A%22Repository%22%7D%2C%7B%22x%22%3A448.73938%2C%22y%22%3A197.73972%2C%22width%22%3A121.68677000000002%2C%22height%22%3A26.905249999999995%2C%22text%22%3A%22packages%22%7D%2C%7B%22x%22%3A110.745575%2C%22y%22%3A199.79936%2C%22width%22%3A58.246365%2C%22height%22%3A22.171639999999996%2C%22text%22%3A%22root%22%7D%2C%7B%22x%22%3A167.33838%2C%22y%22%3A232.04659%2C%22width%22%3A120.22214%2C%22height%22%3A17.941549999999978%2C%22text%22%3A%22package.json%22%7D%2C%7B%22x%22%3A166.5533%2C%22y%22%3A253.54263%2C%22width%22%3A99.49904000000001%2C%22height%22%3A19.321139999999986%2C%22text%22%3A%22lerna.json%22%7D%2C%7B%22x%22%3A161.34712%2C%22y%22%3A275.28955%2C%22width%22%3A125.82961000000003%2C%22height%22%3A21.035750000000007%2C%22text%22%3A%22README.mD%22%7D%2C%7B%22x%22%3A833.46924%2C%22y%22%3A275.8597%2C%22width%22%3A337.55436%2C%22height%22%3A28.291420000000016%2C%22text%22%3A%22mo-demo%2Fcli-shared-utils%22%7D%2C%7B%22x%22%3A520.43964%2C%22y%22%3A277.00076%2C%22width%22%3A164.56336%2C%22height%22%3A26.861760000000004%2C%22text%22%3A%22mo-demo%2Fcli%22%7D%2C%7B%22x%22%3A558.3475%2C%22y%22%3A325.89%2C%22width%22%3A122.92880000000002%2C%22height%22%3A19.722199999999987%2C%22text%22%3A%22package.json%22%7D%2C%7B%22x%22%3A860.9847%2C%22y%22%3A326.00174%2C%22width%22%3A122.09184000000005%2C%22height%22%3A19.362520000000018%2C%22text%22%3A%22package.json%22%7D%2C%7B%22x%22%3A562.60126%2C%22y%22%3A348.2705%2C%22width%22%3A80.05968999999993%2C%22height%22%3A20.358599999999967%2C%22text%22%3A%22indexjs%22%7D%2C%7B%22x%22%3A860.89044%2C%22y%22%3A349.224%2C%22width%22%3A76.97930999999994%2C%22height%22%3A18.108640000000037%2C%22text%22%3A%22index.js%22%7D%2C%7B%22x%22%3A560.5498%2C%22y%22%3A366.27582%2C%22width%22%3A122.20039999999995%2C%22height%22%3A22.643339999999966%2C%22text%22%3A%22README.mD%22%7D%2C%7B%22x%22%3A859.95685%2C%22y%22%3A368.6196%2C%22width%22%3A123.56659000000002%2C%22height%22%3A21.30292000000003%2C%22text%22%3A%22README.md%22%7D%2C%7B%22x%22%3A558.96686%2C%22y%22%3A390.47507%2C%22width%22%3A36.67547000000002%2C%22height%22%3A17.796899999999994%2C%22text%22%3A%22src%22%7D%2C%7B%22x%22%3A861.5889%2C%22y%22%3A391.7642%2C%22width%22%3A36.98930000000007%2C%22height%22%3A16.317099999999982%2C%22text%22%3A%22src%22%7D%2C%7B%22x%22%3A873.01074%2C%22y%22%3A411.71896%2C%22width%22%3A105.54888999999991%2C%22height%22%3A23.002040000000022%2C%22text%22%3A%22-index.js%22%7D%2C%7B%22x%22%3A603.75854%2C%22y%22%3A415.523%2C%22width%22%3A68.98010999999997%2C%22height%22%3A19.37335999999999%2C%22text%22%3A%22ndex.js%22%7D%2C%7B%22x%22%3A849.1024%2C%22y%22%3A432.40994%2C%22width%22%3A149.65049999999997%2C%22height%22%3A20.903689999999983%2C%22text%22%3A%22%E4%B8%80nodemodules%22%7D%2C%7B%22x%22%3A559.9091%2C%22y%22%3A432.73477%2C%22width%22%3A135.18135000000007%2C%22height%22%3A19.313229999999976%2C%22text%22%3A%22nodemodules%22%7D%2C%7B%22x%22%3A604.9639%2C%22y%22%3A453.1766%2C%22width%22%3A92.8845%2C%22height%22%3A20.062099999999987%2C%22text%22%3A%22%40xx-utils%22%7D%2C%7B%22x%22%3A893.9944%2C%22y%22%3A453.14355%2C%22width%22%3A66.07895999999994%2C%22height%22%3A20.97100999999998%2C%22text%22%3A%22chalk%22%7D%2C%7B%22x%22%3A601.40216%2C%22y%22%3A472.44595%2C%22width%22%3A56.534970000000044%2C%22height%22%3A18.72365000000002%2C%22text%22%3A%22chalk%22%7D%2C%7B%22x%22%3A898.4632%2C%22y%22%3A473.34305%2C%22width%22%3A73.84453999999994%2C%22height%22%3A17.93275%2C%22text%22%3A%22semver%22%7D%2C%7B%22x%22%3A111.665375%2C%22y%22%3A597.8154%2C%22width%22%3A174.365995%2C%22height%22%3A31.961460000000102%2C%22text%22%3A%22npm-registry%22%7D%2C%7B%22x%22%3A565.51904%2C%22y%22%3A618.52826%2C%22width%22%3A156.03125999999997%2C%22height%22%3A28.757639999999924%2C%22text%22%3A%22npmpublish%22%7D%5D%2C%22style%22%3A%22none%22%2C%22search%22%3A%22lernapublish%20Repository%20packages%20root%20package.json%20lerna.json%20README.mD%20mo-demo%2Fcli-shared-utils%20mo-demo%2Fcli%20package.json%20package.json%20indexjs%20index.js%20README.mD%20README.md%20src%20src%20-index.js%20ndex.js%20%E4%B8%80nodemodules%20nodemodules%20%40xx-utils%20chalk%20chalk%20semver%20npm-registry%20npmpublish%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22width%22%3A666%2C%22height%22%3A383%7D"><img src="https://cdn.nlark.com/yuque/0/2020/png/346819/1594024317269-03a572de-d7e5-4728-bf62-018a2d8c9cb8.png" alt="image.png" class="image lake-drag-image" title="image.png" data-role="image" data-raw-src="" data-height="383px" /></span></p>
<h4 id="W3Csg" data-lake-id="c4fc8b733d1516862827396aeb3fe8f0">2.11、查看diff</h4>
<div id="nW2ZT" class="lake-card-margin lake-selected" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22bash%22%2C%22code%22%3A%22lerna%20diff%22%2C%22margin%22%3Atrue%2C%22id%22%3A%22nW2ZT%22%7D" data-language="bash">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna <span class="cm-builtin">diff</span></span></span></span></pre>
</div>
</div>
</div>
<p data-lake-id="3ae34d927c8bd660db469ec533b2d748">作用类似git diff，主要用于<span class="lake-fontsize-12">显示自上次relase tag以来有修改的包的差异。</span></p>
<h4 id="k0n8V" data-lake-id="b2aabf72b78e424b3732be4d18dbda23">2.12、链接引用</h4>
<div id="6pryt" class="lake-card-margin lake-selected" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22bash%22%2C%22code%22%3A%22lerna%20link%22%2C%22margin%22%3Atrue%2C%22id%22%3A%226pryt%22%7D" data-language="bash">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">lerna link</span></span></span></pre>
</div>
</div>
</div>
<p data-lake-id="38a30f6d12e4a003192edf37250d4dc2">链接项目引用的库。主要用于项目包建立软链，类似 npm link。</p>
<h4 id="w8E6n" data-lake-id="f7e6cd99ca47260d5f3ef510a2b2abe8">2.13、exec</h4>
<p data-lake-id="10fbc9c93f58bea23937056edb3811d7">在每个包目录下执行任何命令。</p>
<div id="J0HSn" class="lake-card-margin lake-selected" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22bash%22%2C%22code%22%3A%22%24%20lerna%20exec%20--%20%3Ccommand%3E%20%5B..args%5D%20%23%20runs%20the%20command%20in%20all%20packages%5Cn%24%20lerna%20exec%20--%20rm%20-rf%20.%2Fnode_modules%5Cn%24%20lerna%20exec%20--%20protractor%20conf.js%5Cn%24%20lerna%20exec%20--%20npm%20view%20%5C%5C%24LERNA_PACKAGE_NAME%5Cn%24%20lerna%20exec%20--%20node%20%5C%5C%24LERNA_ROOT_PATH%2Fscripts%2Fsome-script.js%22%2C%22margin%22%3Atrue%2C%22id%22%3A%22J0HSn%22%7D" data-language="bash">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content"><span class="cm-def">$ lerna exec <span class="cm-attribute">-- &lt;command&gt; [..args] <span class="cm-comment"># runs the command in all packages
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content"><span class="cm-def">$ lerna exec <span class="cm-attribute">-- <span class="cm-builtin">rm <span class="cm-attribute">-rf ./node_modules
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content"><span class="cm-def">$ lerna exec <span class="cm-attribute">-- protractor conf.js
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content"><span class="cm-def">$ lerna exec <span class="cm-attribute">-- <span class="cm-builtin">npm view \$LERNA_PACKAGE_NAME
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content"><span class="cm-def">$ lerna exec <span class="cm-attribute">-- <span class="cm-builtin">node \$LERNA_ROOT_PATH/scripts/some-script.js</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre>
</div>
</div>
</div>
<h3 id="1Rkhq" data-lake-id="743fcec6539789bc07863073c9fd14df">3、模式</h3>
<p data-lake-id="97ec0b2b26e4329f144213b5b30b9e85">&nbsp; &nbsp;&nbsp;Lerna提供了两种管理项目的方式，一种是固定模式（Fixed mode），另一种是独立模式（Independent mode），两者区分如下：</p>
<p data-lake-id="3ac25ef55e74617bf59ef89266c3fb71">固定模式下，packages文件夹下的所有包将会公用一个版本号version（这个version就是lerna.json中的version字段），会自动将所有的包绑定到一个版本号上面，当任意一个npm包发生了更新，整个公用版本号就会发生变化。</p>
<p data-lake-id="a2e60b2790b6f666ce204e00f0d1602c">独立模式下，每个npm包都具有一个独立的版本号，在使用发布命令lerna publish命令时，可以为每个包单独的进行发布操作，同时只更新当前包的版本号，不会影响其余包的版本。在此模式下，lerna.json的version字段改为independent即可。</p>
<p data-lake-id="4c1ff7ca8106949aa5e2004b3430e538"><span class="lake-fontsize-12">lerna version&nbsp;会检测从上一个版本发布以来的变动，但有一些文件的提交，我们不希望触发版本的变动，譬如 .md 文件的修改，并没有实际引起 package 逻辑的变化，不应该触发版本的变更。可以通过ignoreChanges<span class="lake-fontsize-12">配置排除，如下：</span></span></p>
<div id="PDbl3" class="lake-card-margin lake-selected" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22json%22%2C%22code%22%3A%22%7B%5Cn%20%20%5C%22packages%5C%22%3A%20%5B%5Cn%20%20%20%20%5C%22packages%2F*%5C%22%5Cn%20%20%5D%2C%5Cn%20%20%5C%22command%5C%22%3A%20%7B%5Cn%20%20%20%20%5C%22bootstrap%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%5C%22hoist%5C%22%3A%20true%5Cn%20%20%20%20%7D%2C%5Cn%20%20%20%20%5C%22version%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%5C%22conventionalCommits%5C%22%3A%20true%5Cn%20%20%20%20%7D%5Cn%20%20%7D%2C%5Cn%20%20%5C%22ignoreChanges%5C%22%3A%20%5B%5Cn%20%20%20%20%5C%22**%2F*.md%5C%22%5Cn%20%20%5D%2C%5Cn%20%20%5C%22version%5C%22%3A%20%5C%220.0.1-alpha.1%5C%22%5Cn%7D%22%2C%22margin%22%3Atrue%2C%22id%22%3A%22PDbl3%22%7D" data-language="json">
<div class="lake-codeblock-content">
<div class="CodeMirror-sizer">
<pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">{
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">  <span class="cm-string cm-property">"packages": [
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">    <span class="cm-string">"packages/*"
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">  ],
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">  <span class="cm-string cm-property">"command": {
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">    <span class="cm-string cm-property">"bootstrap": {
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">      <span class="cm-string cm-property">"hoist": <span class="cm-atom">true
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">    },
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-1"><span class="lake-preview-codeblock-content">    <span class="cm-string cm-property">"version": {
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">      <span class="cm-string cm-property">"conventionalCommits": <span class="cm-atom">true
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">    }
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">  },
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">  <span class="cm-string cm-property">"ignoreChanges": [
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">    <span class="cm-string">"**/*.md"
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">  ],
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">  <span class="cm-string cm-property">"version": <span class="cm-string">"0.0.1-alpha.1"
<span class="lake-preview-line"><span class="lake-preview-line-number lake-lm-pad-level-0"><span class="lake-preview-codeblock-content">}</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre>
</div>
</div>
</div>
<p data-lake-id="6e7de78896b6450b13497ff49501d75d">效果如下：</p>
<p data-lake-id="ce58cd9029e6225cdc6daf3e1471a1bf"><span class="lake-card-margin-top lake-card-margin-bottom lake-selected" data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F346819%2F1594025570416-019056ef-444f-43da-a5e8-8d6ccd9c8ada.png%22%2C%22originWidth%22%3A959%2C%22originHeight%22%3A507%2C%22name%22%3A%22image.png%22%2C%22size%22%3A50945%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A420.94675%2C%22y%22%3A51.45349%2C%22width%22%3A116.81210000000004%2C%22height%22%3A17.948949999999996%2C%22text%22%3A%22lernaversion%22%7D%2C%7B%22x%22%3A67.91685%2C%22y%22%3A99.66455%2C%22width%22%3A100.88128999999999%2C%22height%22%3A24.770489999999995%2C%22text%22%3A%22Repasitory%22%7D%2C%7B%22x%22%3A184.0484%2C%22y%22%3A101.2363%2C%22width%22%3A62.28418000000002%2C%22height%22%3A23.828280000000007%2C%22text%22%3A%22%40tag%22%7D%2C%7B%22x%22%3A333.8462%2C%22y%22%3A164.80489%2C%22width%22%3A80.47802000000001%2C%22height%22%3A20.48938000000001%2C%22text%22%3A%22packages%22%7D%2C%7B%22x%22%3A110.03956%2C%22y%22%3A167.28065%2C%22width%22%3A39.55214000000001%2C%22height%22%3A14.458200000000005%2C%22text%22%3A%22root%22%7D%2C%7B%22x%22%3A148.97798%2C%22y%22%3A188.53255%2C%22width%22%3A80.04411999999999%2C%22height%22%3A12.431960000000004%2C%22text%22%3A%22packaqe.jison%22%7D%2C%7B%22x%22%3A148.08878%2C%22y%22%3A204.24867%2C%22width%22%3A65.58067%2C%22height%22%3A11.882689999999997%2C%22text%22%3A%22lerna.json%22%7D%2C%7B%22x%22%3A364.67853%2C%22y%22%3A216.33328%2C%22width%22%3A126.40646999999996%2C%22height%22%3A22.111349999999987%2C%22text%22%3A%22%40mo-demo%2Fcli%22%7D%2C%7B%22x%22%3A575.48376%2C%22y%22%3A217.95764%2C%22width%22%3A235.04354%2C%22height%22%3A20.414510000000007%2C%22text%22%3A%22%40mo-demo%2Fcli-shared-utils%22%7D%2C%7B%22x%22%3A144.84984%2C%22y%22%3A220.36533%2C%22width%22%3A82.22726%2C%22height%22%3A12.81201999999999%2C%22text%22%3A%22READMEmD%22%7D%2C%7B%22x%22%3A147.32884%2C%22y%22%3A237.99438%2C%22width%22%3A107.61623999999998%2C%22height%22%3A14.520719999999983%2C%22text%22%3A%22CHANGELOG.md%22%7D%2C%7B%22x%22%3A408.28238%2C%22y%22%3A251.51807%2C%22width%22%3A81.25644%2C%22height%22%3A12.461230000000029%2C%22text%22%3A%22package.json%22%7D%2C%7B%22x%22%3A605.61957%2C%22y%22%3A251.4935%2C%22width%22%3A82.2036700000001%2C%22height%22%3A13.748349999999988%2C%22text%22%3A%22packagejson%22%7D%2C%7B%22x%22%3A147.11827%2C%22y%22%3A256.82523%2C%22width%22%3A88.63785000000001%2C%22height%22%3A12.877930000000049%2C%22text%22%3A%22nodemodules%22%7D%2C%7B%22x%22%3A606.5527%2C%22y%22%3A265.19833%2C%22width%22%3A59.353500000000054%2C%22height%22%3A14.240940000000023%2C%22text%22%3A%22index.js%22%7D%2C%7B%22x%22%3A409.3283%2C%22y%22%3A266.34116%2C%22width%22%3A50.020849999999996%2C%22height%22%3A11.939199999999971%2C%22text%22%3A%22index.js%22%7D%2C%7B%22x%22%3A165.99905%2C%22y%22%3A271.5629%2C%22width%22%3A50.669039999999995%2C%22height%22%3A13.227660000000014%2C%22text%22%3A%22semyer%22%7D%2C%7B%22x%22%3A408.66565%2C%22y%22%3A278.65588%2C%22width%22%3A78.40195%2C%22height%22%3A12.668369999999982%2C%22text%22%3A%22READMEmd%22%7D%2C%7B%22x%22%3A607.20215%2C%22y%22%3A278.61063%2C%22width%22%3A86.19975%2C%22height%22%3A14.589769999999987%2C%22text%22%3A%22README.mD%22%7D%2C%7B%22x%22%3A170.3505%2C%22y%22%3A283.6168%2C%22width%22%3A36.00946999999999%2C%22height%22%3A11.778500000000008%2C%22text%22%3A%22chalk%22%7D%2C%7B%22x%22%3A409.221%2C%22y%22%3A292.39432%2C%22width%22%3A97.63288%2C%22height%22%3A12.591920000000016%2C%22text%22%3A%22CHANGLOG.mD%22%7D%2C%7B%22x%22%3A607.47876%2C%22y%22%3A292.6417%2C%22width%22%3A108.17954000000009%2C%22height%22%3A14.173329999999964%2C%22text%22%3A%22CHANGELOG.MD%22%7D%2C%7B%22x%22%3A409.00766%2C%22y%22%3A308.52484%2C%22width%22%3A28.474940000000004%2C%22height%22%3A9.522800000000018%2C%22text%22%3A%22Src%22%7D%2C%7B%22x%22%3A607.4925%2C%22y%22%3A311.66946%2C%22width%22%3A23.304500000000075%2C%22height%22%3A10.159819999999968%2C%22text%22%3A%22src%22%7D%2C%7B%22x%22%3A408.46436%2C%22y%22%3A324.11346%2C%22width%22%3A65.93153999999998%2C%22height%22%3A11.997140000000002%2C%22text%22%3A%22-index.%22%7D%2C%7B%22x%22%3A630.9408%2C%22y%22%3A325.61386%2C%22width%22%3A50.32164999999998%2C%22height%22%3A13.516079999999988%2C%22text%22%3A%22indexjs%22%7D%2C%7B%22x%22%3A404.04892%2C%22y%22%3A335.77576%2C%22width%22%3A91.8999%2C%22height%22%3A12.45010000000002%2C%22text%22%3A%22nodemodules%22%7D%2C%7B%22x%22%3A438.2971%2C%22y%22%3A349.23804%2C%22width%22%3A60.2439%2C%22height%22%3A13.054319999999962%2C%22text%22%3A%22%40xx-utils%22%7D%5D%2C%22style%22%3A%22none%22%2C%22search%22%3A%22lernaversion%20Repasitory%20%40tag%20packages%20root%20packaqe.jison%20lerna.json%20%40mo-demo%2Fcli%20%40mo-demo%2Fcli-shared-utils%20READMEmD%20CHANGELOG.md%20package.json%20packagejson%20nodemodules%20index.js%20index.js%20semyer%20READMEmd%20README.mD%20chalk%20CHANGLOG.mD%20CHANGELOG.MD%20Src%20src%20-index.%20indexjs%20nodemodules%20%40xx-utils%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22width%22%3A660%2C%22height%22%3A349%7D"><img src="https://cdn.nlark.com/yuque/0/2020/png/346819/1594025570416-019056ef-444f-43da-a5e8-8d6ccd9c8ada.png" alt="image.png" class="image lake-drag-image" title="image.png" data-role="image" data-raw-src="" data-height="349px" /></span></p>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/12/11/cssFilter/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">&lt;</strong>
      <div class="article-nav-title">
        
          CSS色调旋转滤镜
        
      </div>
    </a>
  
  
    <a href="/2020/12/11/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">Jerome Zhang Blog</div>
      <strong class="article-nav-caption">&gt;</strong>
    </a>
  
</nav>

  
</article>






</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">
        &copy; 2020 Jerome Zhang
      </div>
        <div class="footer-right">
          <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/smackgg/hexo-theme-smackdown" target="_blank">Smackdown</a>
        </div>
    </div>
  </div>
</footer>
    </div>
    
  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">



<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>

<script src="/js/main.js"></script>




<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js"></script>


  </div>
</body>
</html>